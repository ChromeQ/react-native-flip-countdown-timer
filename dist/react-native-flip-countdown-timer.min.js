!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-native"),require("prop-types"),require("invariant")):"function"==typeof define&&define.amd?define(["exports","react","react-native","prop-types","invariant"],t):t((e=e||self)["flip-countdown-timer"]={},e.React,e.reactNative,e.PropTypes,e.invariant)}(this,function(e,t,r,n,a){"use strict";function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,s(e,t)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,a=a&&a.hasOwnProperty("default")?a.default:a;var c=r.StyleSheet.create({wrapper:{flexDirection:"row"},numberWrapper:{backgroundColor:"#333333",margin:3,shadowColor:"#1f1f1f",shadowOffset:{width:0,height:2},shadowRadius:2,shadowOpacity:1,elevation:5},card:{flex:.5,alignItems:"center",justifyContent:"center",borderColor:"#1f1f1f",overflow:"hidden"},overflowContainer:{overflow:"hidden"},number:{fontWeight:"700",color:"#cccccc"},flipCard:{position:"absolute",left:0,height:"50%",width:"100%",backgroundColor:"#333333",borderColor:"#1f1f1f",backfaceVisibility:"hidden",alignItems:"center",justifyContent:"center"},separator:{marginHorizontal:5,marginVertical:10,alignItems:"center",justifyContent:"space-around"},circle:{height:5,width:5,borderRadius:5,backgroundColor:"#333333"}}),m={createIdentityMatrix:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},createCopy:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},createOrthographic:function(e,t,r,n,a,i){return[2/(t-e),0,0,0,0,2/(n-r),0,0,0,0,-2/(i-a),0,-(t+e)/(t-e),-(n+r)/(n-r),-(i+a)/(i-a),1]},createFrustum:function(e,t,r,n,a,i){var o=1/(t-e),u=1/(n-r),s=1/(a-i);return[a*o*2,0,0,0,0,a*u*2,0,0,(t+e)*o,(n+r)*u,(i+a)*s,-1,0,0,i*a*s*2,0]},createPerspective:function(e,t,r,n){var a=1/Math.tan(e/2),i=1/(r-n);return[a/t,0,0,0,0,a,0,0,0,0,(n+r)*i,-1,0,0,n*r*i*2,0]},createTranslate2d:function(e,t){var r=m.createIdentityMatrix();return m.reuseTranslate2dCommand(r,e,t),r},reuseTranslate2dCommand:function(e,t,r){e[12]=t,e[13]=r},reuseTranslate3dCommand:function(e,t,r,n){e[12]=t,e[13]=r,e[14]=n},createScale:function(e){var t=m.createIdentityMatrix();return m.reuseScaleCommand(t,e),t},reuseScaleCommand:function(e,t){e[0]=t,e[5]=t},reuseScale3dCommand:function(e,t,r,n){e[0]=t,e[5]=r,e[10]=n},reusePerspectiveCommand:function(e,t){e[11]=-1/t},reuseScaleXCommand:function(e,t){e[0]=t},reuseScaleYCommand:function(e,t){e[5]=t},reuseScaleZCommand:function(e,t){e[10]=t},reuseRotateXCommand:function(e,t){e[5]=Math.cos(t),e[6]=Math.sin(t),e[9]=-Math.sin(t),e[10]=Math.cos(t)},reuseRotateYCommand:function(e,t){e[0]=Math.cos(t),e[2]=-Math.sin(t),e[8]=Math.sin(t),e[10]=Math.cos(t)},reuseRotateZCommand:function(e,t){e[0]=Math.cos(t),e[1]=Math.sin(t),e[4]=-Math.sin(t),e[5]=Math.cos(t)},createRotateZ:function(e){var t=m.createIdentityMatrix();return m.reuseRotateZCommand(t,e),t},reuseSkewXCommand:function(e,t){e[4]=Math.tan(t)},reuseSkewYCommand:function(e,t){e[1]=Math.tan(t)},multiplyInto:function(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3],u=t[4],s=t[5],l=t[6],c=t[7],m=t[8],p=t[9],f=t[10],d=t[11],b=t[12],v=t[13],h=t[14],y=t[15],S=r[0],T=r[1],M=r[2],C=r[3];e[0]=S*n+T*u+M*m+C*b,e[1]=S*a+T*s+M*p+C*v,e[2]=S*i+T*l+M*f+C*h,e[3]=S*o+T*c+M*d+C*y,S=r[4],T=r[5],M=r[6],C=r[7],e[4]=S*n+T*u+M*m+C*b,e[5]=S*a+T*s+M*p+C*v,e[6]=S*i+T*l+M*f+C*h,e[7]=S*o+T*c+M*d+C*y,S=r[8],T=r[9],M=r[10],C=r[11],e[8]=S*n+T*u+M*m+C*b,e[9]=S*a+T*s+M*p+C*v,e[10]=S*i+T*l+M*f+C*h,e[11]=S*o+T*c+M*d+C*y,S=r[12],T=r[13],M=r[14],C=r[15],e[12]=S*n+T*u+M*m+C*b,e[13]=S*a+T*s+M*p+C*v,e[14]=S*i+T*l+M*f+C*h,e[15]=S*o+T*c+M*d+C*y},determinant:function(e){var t=e[0],r=e[1],n=e[2],a=e[3],i=e[4],o=e[5],u=e[6],s=e[7],l=e[8],c=e[9],m=e[10],p=e[11],f=e[12],d=e[13],b=e[14],v=e[15];return a*u*c*f-n*s*c*f-a*o*m*f+r*s*m*f+n*o*p*f-r*u*p*f-a*u*l*d+n*s*l*d+a*i*m*d-t*s*m*d-n*i*p*d+t*u*p*d+a*o*l*b-r*s*l*b-a*i*c*b+t*s*c*b+r*i*p*b-t*o*p*b-n*o*l*v+r*u*l*v+n*i*c*v-t*u*c*v-r*i*m*v+t*o*m*v},inverse:function(e){var t=m.determinant(e);if(!t)return e;var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],u=e[5],s=e[6],l=e[7],c=e[8],p=e[9],f=e[10],d=e[11],b=e[12],v=e[13],h=e[14],y=e[15];return[(s*d*v-l*f*v+l*p*h-u*d*h-s*p*y+u*f*y)/t,(i*f*v-a*d*v-i*p*h+n*d*h+a*p*y-n*f*y)/t,(a*l*v-i*s*v+i*u*h-n*l*h-a*u*y+n*s*y)/t,(i*s*p-a*l*p-i*u*f+n*l*f+a*u*d-n*s*d)/t,(l*f*b-s*d*b-l*c*h+o*d*h+s*c*y-o*f*y)/t,(a*d*b-i*f*b+i*c*h-r*d*h-a*c*y+r*f*y)/t,(i*s*b-a*l*b-i*o*h+r*l*h+a*o*y-r*s*y)/t,(a*l*c-i*s*c+i*o*f-r*l*f-a*o*d+r*s*d)/t,(u*d*b-l*p*b+l*c*v-o*d*v-u*c*y+o*p*y)/t,(i*p*b-n*d*b-i*c*v+r*d*v+n*c*y-r*p*y)/t,(n*l*b-i*u*b+i*o*v-r*l*v-n*o*y+r*u*y)/t,(i*u*c-n*l*c-i*o*p+r*l*p+n*o*d-r*u*d)/t,(s*p*b-u*f*b-s*c*v+o*f*v+u*c*h-o*p*h)/t,(n*f*b-a*p*b+a*c*v-r*f*v-n*c*h+r*p*h)/t,(a*u*b-n*s*b-a*o*v+r*s*v+n*o*h-r*u*h)/t,(n*s*c-a*u*c+a*o*p-r*s*p-n*o*f+r*u*f)/t]},transpose:function(e){return[e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]]},multiplyVectorByMatrix:function(e,t){var r=e[0],n=e[1],a=e[2],i=e[3];return[r*t[0]+n*t[4]+a*t[8]+i*t[12],r*t[1]+n*t[5]+a*t[9]+i*t[13],r*t[2]+n*t[6]+a*t[10]+i*t[14],r*t[3]+n*t[7]+a*t[11]+i*t[15]]},v3Length:function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},v3Normalize:function(e,t){var r=1/(t||m.v3Length(e));return[e[0]*r,e[1]*r,e[2]*r]},v3Dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},v3Combine:function(e,t,r,n){return[r*e[0]+n*t[0],r*e[1]+n*t[1],r*e[2]+n*t[2]]},v3Cross:function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},quaternionToDegreesXYZ:function(e,t,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=n*n,s=a*a,l=i*i,c=n*a+i*o,p=o*o+u+s+l,f=180/Math.PI;return c>.49999*p?[0,2*Math.atan2(n,o)*f,90]:c<-.49999*p?[0,-2*Math.atan2(n,o)*f,-90]:[m.roundTo3Places(Math.atan2(2*n*o-2*a*i,1-2*u-2*l)*f),m.roundTo3Places(Math.atan2(2*a*o-2*n*i,1-2*s-2*l)*f),m.roundTo3Places(Math.asin(2*n*a+2*i*o)*f)]},roundTo3Places:function(e){var t=e.toString().split("e");return.001*Math.round(t[0]+"e"+(t[1]?+t[1]-3:3))},decomposeMatrix:function(e){a(16===e.length,"Matrix decomposition needs a list of 3d matrix values, received %s",e);var t=[],r=[],n=[],i=[],o=[];if(e[15]){for(var u=[],s=[],l=0;l<4;l++){u.push([]);for(var c=0;c<4;c++){var p=e[4*l+c]/e[15];u[l].push(p),s.push(3===c?0:p)}}if(s[15]=1,m.determinant(s)){if(0!==u[0][3]||0!==u[1][3]||0!==u[2][3]){var f=[u[0][3],u[1][3],u[2][3],u[3][3]],d=m.inverse(s),b=m.transpose(d);t=m.multiplyVectorByMatrix(f,b)}else t[0]=t[1]=t[2]=0,t[3]=1;for(var v=0;v<3;v++)o[v]=u[3][v];for(var h=[],y=0;y<3;y++)h[y]=[u[y][0],u[y][1],u[y][2]];n[0]=m.v3Length(h[0]),h[0]=m.v3Normalize(h[0],n[0]),i[0]=m.v3Dot(h[0],h[1]),h[1]=m.v3Combine(h[1],h[0],1,-i[0]),n[1]=m.v3Length(h[1]),h[1]=m.v3Normalize(h[1],n[1]),i[0]/=n[1],i[1]=m.v3Dot(h[0],h[2]),h[2]=m.v3Combine(h[2],h[0],1,-i[1]),i[2]=m.v3Dot(h[1],h[2]),h[2]=m.v3Combine(h[2],h[1],1,-i[2]),n[2]=m.v3Length(h[2]),h[2]=m.v3Normalize(h[2],n[2]),i[1]/=n[2],i[2]/=n[2];var S,T=m.v3Cross(h[1],h[2]);if(m.v3Dot(h[0],T)<0)for(var M=0;M<3;M++)n[M]*=-1,h[M][0]*=-1,h[M][1]*=-1,h[M][2]*=-1;return r[0]=.5*Math.sqrt(Math.max(1+h[0][0]-h[1][1]-h[2][2],0)),r[1]=.5*Math.sqrt(Math.max(1-h[0][0]+h[1][1]-h[2][2],0)),r[2]=.5*Math.sqrt(Math.max(1-h[0][0]-h[1][1]+h[2][2],0)),r[3]=.5*Math.sqrt(Math.max(1+h[0][0]+h[1][1]+h[2][2],0)),h[2][1]>h[1][2]&&(r[0]=-r[0]),h[0][2]>h[2][0]&&(r[1]=-r[1]),h[1][0]>h[0][1]&&(r[2]=-r[2]),{rotationDegrees:S=r[0]<.001&&r[0]>=0&&r[1]<.001&&r[1]>=0?[0,0,m.roundTo3Places(180*Math.atan2(h[0][1],h[0][0])/Math.PI)]:m.quaternionToDegreesXYZ(r,u,h),perspective:t,quaternion:r,scale:n,skew:i,translation:o,rotate:S[2],rotateX:S[0],rotateY:S[1],scaleX:n[0],scaleY:n[1],translateX:o[0],translateY:o[1]}}}}},p=m,f=p.createIdentityMatrix,d=p.multiplyInto;function b(e){var t=parseInt(e),r=Math.floor(t/3600),n=Math.floor((t-3600*r)/60);return{hours:r,minutes:n,seconds:t-3600*r-60*n}}var v={createIdentityMatrix:f,multiplyInto:d,rotateXMatrix:function(e,t){var r=Math.PI/180*t,n=Math.cos(r),a=Math.sin(r);d(e,e,[1,0,0,0,0,n,-a,0,0,a,n,0,0,0,0,1])},perspectiveMatrix:function(e,t){var r=f();p.reusePerspectiveCommand(r,t),d(e,e,r)},translateMatrix:function(e,t){var r=t.x,n=t.y,a=t.z,i=f();p.reuseTranslate3dCommand(i,r,n,a),d(e,i,e)},untranslateMatrix:function(e,t){var r=t.x,n=t.y,a=t.z,i=f();p.reuseTranslate3dCommand(i,-r,-n,-a),d(e,e,i)},convertNumberToTime:b,convertDateToTime:function(e){var t=Date.now(),r="number"==typeof e?e:e instanceof Date?e.getTime():0,n=Math.round((r-t)/1e3);return n<=0?{hours:0,minutes:0,seconds:0}:b(n)},subtractTime:function(e,t,r){return(r-=1)<0&&(t<=0&&e<=0?(t=0,r=0):(t-=1,r=59)),t<0&&(e<=0?(e=0,t=0):(e-=1,t=59)),{hours:e,minutes:t,seconds:r}},formatTime:function(e,t,r){return e<10&&(e="0"+e),t<10&&(t="0"+t),r<10&&(r="0"+r),{hours:e,minutes:t,seconds:r}}};function h(e){var n=e.setRef,a=e.type,i=e.size,o=e.number,u=e.flipCardStyle,s=e.numberStyle;return t.createElement(r.Animated.View,{ref:n,style:[c.flipCard,"front"===a?{top:0,borderTopLeftRadius:i/10,borderTopRightRadius:i/10,borderBottomWidth:.5}:{top:"50%",borderBottomLeftRadius:i/10,borderBottomRightRadius:i/10,borderTopWidth:.5},u]},t.createElement(r.View,{style:c.overflowContainer},t.createElement(r.Text,{style:[c.number,{transform:["front"===a?{translateY:.3*i}:{translateY:.3*-i}],fontSize:i/1.5,lineHeight:i/1.5},s]},o)))}function y(e){var n=e.type,a=e.size,i=e.number,o=e.cardStyle,u=e.numberStyle;return t.createElement(r.View,{style:[c.card,"upper"===n?{borderBottomWidth:.5}:{borderTopWidth:.5},o]},t.createElement(r.Text,{style:[c.number,{transform:["upper"===n?{translateY:.3*a}:{translateY:.3*-a}],fontSize:a/1.5,lineHeight:a/1.5},u]},i))}h.defaultProps={flipCardStyle:{},numberStyle:{}},h.propTypes={setRef:n.func.isRequired,type:n.string.isRequired,size:n.number.isRequired,number:n.oneOfType([n.string,n.number]).isRequired,flipCardStyle:n.object,numberStyle:n.object},y.defaultProps={cardStyle:{},numberStyle:{}},y.propTypes={type:n.string.isRequired,size:n.number.isRequired,number:n.oneOfType([n.string,n.number]).isRequired,cardStyle:n.object,numberStyle:n.object};var S=r.Dimensions.get("window").width,T=function(e){function n(t){var n;return i(l(n=e.call(this,t)||this),"setFrontRef",function(e){n.frontRef=e}),i(l(n),"setBackRef",function(e){n.backRef=e}),i(l(n),"animateTick",function(){n.rotateFront.setValue(0),n.rotateBack.setValue(-180),r.Animated.parallel([r.Animated.timing(n.rotateFront,{toValue:180,duration:800,useNativeDriver:!0}),r.Animated.timing(n.rotateBack,{toValue:0,duration:800,useNativeDriver:!0})]).start()}),i(l(n),"transformRef",function(e,t,r){var a=n.props.perspective,i=v.createIdentityMatrix();v.translateMatrix(i,{x:0,y:r,z:0}),v.perspectiveMatrix(i,a),v.rotateXMatrix(i,t),v.untranslateMatrix(i,{x:0,y:r,z:0}),e&&e.setNativeProps({style:{transform:[{matrix:i}]}})}),n.rotateFront=new r.Animated.Value(0),n.rotateBack=new r.Animated.Value(-180),n.frontRef=null,n.backRef=null,n}u(n,e);var a=n.prototype;return a.componentDidMount=function(){var e=this,t=this.props.size;this.rotateFront.addListener(function(r){var n=r.value;e.transformRef(e.frontRef,n,.3*t)}),this.rotateBack.addListener(function(r){var n=r.value;e.transformRef(e.backRef,n,.3*-t)})},a.shouldComponentUpdate=function(e){var t=this.props.previousNumber;return e.previousNumber!==t&&this.animateTick(),!0},a.render=function(){var e=this.props,n=e.number,a=e.previousNumber,i=e.size,o=e.numberWrapperStyle,u=e.cardStyle,s=e.flipCardStyle,l=e.numberStyle;return t.createElement(r.View,{style:[c.numberWrapper,{width:.8*i,height:1.2*i,borderRadius:i/10},o]},t.createElement(y,{type:"upper",size:i,number:a,cardStyle:u,numberStyle:l}),t.createElement(y,{type:"lower",size:i,number:n,cardStyle:u,numberStyle:l}),t.createElement(h,{setRef:this.setFrontRef,type:"front",size:i,number:n,flipCardStyle:s,numberStyle:l}),t.createElement(h,{setRef:this.setBackRef,type:"back",size:i,number:a,flipCardStyle:s,numberStyle:l}))},n}(t.Component);function M(e){var n=e.number,a=e.unit,i=e.flip,o=e.size,u=e.perspective,s=e.numberWrapperStyle,l=e.cardStyle,m=e.flipCardStyle,p=e.numberStyle,f=n+(i?1:0);f=e.firstRender?n:"hours"!==a?60===f?0:f:24===f?0:f;var d=n<10?"0"+n:String(n),b=f<10?"0"+f:String(f),v=d.split(""),h=b.split("");return t.createElement(r.View,{style:c.wrapper},t.createElement(T,{number:h[0],previousNumber:v[0],size:o,perspective:u,numberWrapperStyle:s,cardStyle:l,flipCardStyle:m,numberStyle:p}),t.createElement(T,{number:h[1],previousNumber:v[1],size:o,perspective:u,numberWrapperStyle:s,cardStyle:l,flipCardStyle:m,numberStyle:p}))}function C(){return t.createElement(r.View,{style:c.separator},t.createElement(r.View,{style:c.circle}),t.createElement(r.View,{style:c.circle}))}T.defaultProps={size:S/6,perspective:250},T.propTypes={number:n.oneOfType([n.string,n.number]).isRequired,previousNumber:n.oneOfType([n.string,n.number]),perspective:n.number,size:n.number,numberWrapperStyle:n.object,cardStyle:n.object,flipCardStyle:n.object,numberStyle:n.object},M.defaultProps={unit:"seconds"},M.propTypes={number:n.number.isRequired,unit:n.oneOf(["hours","minutes","seconds"]),flip:n.bool,size:n.number,perspective:n.number,numberWrapperStyle:n.object,cardStyle:n.object,flipCardStyle:n.object,numberStyle:n.object,firstRender:n.bool};var g=function(e){function n(t){var r;i(l(r=e.call(this,t)||this),"updateTime",function(){r.initialTime=!1;var e=r.state,t=e.hours,n=e.minutes,a=e.seconds;if(t||n||a){var i=r.props.onComplete,u=v.subtractTime(t,n,a);r.setState(function(e){return o({},e,u)}),0===u.hours&&0===u.minutes&&0===u.seconds&&(clearInterval(r.timer),setTimeout(i,800))}else t||n||a||clearInterval(r.timer)});var n=r.props,a=n.duration,u=n.time,s=void 0!==u?v.convertDateToTime(u):v.convertNumberToTime(a),c=s.hours,m=s.minutes,p=s.seconds;return r.state={hours:c,minutes:m,seconds:p},r.initialTime=!0,r}u(n,e);var a=n.prototype;return a.componentDidMount=function(){var e=this.state,t=e.hours,r=e.minutes,n=e.seconds,a=this.props.play;(t||r||n)&&a&&(this.timer=setInterval(this.updateTime,1e3))},a.shouldComponentUpdate=function(e){var t=this.props,r=t.time,n=t.duration,a=t.play;if(e.time!==r||e.duration!==n){clearInterval(this.timer);var i=e.time!==r?v.convertDateToTime(e.time):v.convertNumberToTime(e.duration);this.initialTime=!0,this.setState(i),this.timer=setInterval(this.updateTime,1e3)}return e.play!==a&&(clearInterval(this.timer),e.play&&(this.timer=setInterval(this.updateTime,1e3))),!0},a.componentWillUnmount=function(){clearInterval(this.timer)},a.render=function(){var e=this.props,n=e.wrapperStyle,a=e.flipNumberProps,i=e.unitsToShow,u=e.separators,s=this.state,l=s.hours,m=s.minutes,p=s.seconds,f=i.includes("H"),d=i.includes("M"),b=i.includes("S");return t.createElement(r.View,{style:[c.wrapper,n]},f&&t.createElement(t.Fragment,null,t.createElement(M,o({number:l,unit:"hours",flip:59===m,firstRender:this.initialTime},a)),u&&t.createElement(C,null)),d&&t.createElement(t.Fragment,null,t.createElement(M,o({number:m,unit:"minutes",flip:59===p,firstRender:this.initialTime},a)),u&&t.createElement(C,null)),b&&t.createElement(M,o({number:p,unit:"seconds",flip:!0,firstRender:this.initialTime},a)))},n}(t.Component);g.defaultProps={play:!0,wrapperStyle:{},onComplete:function(){},separators:!0,unitsToShow:["H","M","S"]},g.propTypes={duration:n.number,time:n.oneOfType([n.number,n.instanceOf(Date)]),play:n.bool,wrapperStyle:n.object,flipNumberProps:n.shape({size:n.number,perspective:n.number,numberWrapperStyle:n.object,cardStyle:n.object,flipCardStyle:n.object,numberStyle:n.object}),onComplete:n.func,separators:n.bool,unitsToShow:n.arrayOf(n.string)},e.CountdownTimer=g,e.FlipNumber=M,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=react-native-flip-countdown-timer.min.js.map
