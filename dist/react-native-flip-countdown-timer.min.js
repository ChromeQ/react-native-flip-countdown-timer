!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-native"),require("prop-types"),require("react-native/Libraries/Utilities/MatrixMath")):"function"==typeof define&&define.amd?define(["exports","react","react-native","prop-types","react-native/Libraries/Utilities/MatrixMath"],t):t((e=e||self)["flip-countdown-timer"]={},e.React,e.reactNative,e.PropTypes,e.MatrixMath)}(this,function(e,t,r,n,i){"use strict";function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,u(e,t)}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,i=i&&i.hasOwnProperty("default")?i.default:i;var p=r.StyleSheet.create({wrapper:{flexDirection:"row"},numberWrapper:{backgroundColor:"#333333",margin:3,shadowColor:"#1f1f1f",shadowOffset:{width:0,height:2},shadowRadius:2,shadowOpacity:1,elevation:5},card:{flex:.5,alignItems:"center",justifyContent:"center",borderColor:"#1f1f1f",overflow:"hidden"},overflowContainer:{overflow:"hidden"},number:{fontWeight:"700",color:"#cccccc"},flipCard:{position:"absolute",left:0,height:"50%",width:"100%",backgroundColor:"#333333",borderColor:"#1f1f1f",backfaceVisibility:"hidden",alignItems:"center",justifyContent:"center"},separator:{marginHorizontal:5,marginVertical:10,alignItems:"center",justifyContent:"space-around"},circle:{height:5,width:5,borderRadius:5,backgroundColor:"#333333"}}),c=i.createIdentityMatrix,m=i.multiplyInto;function f(e){var t=parseInt(e),r=Math.floor(t/3600),n=Math.floor((t-3600*r)/60);return{hours:r,minutes:n,seconds:t-3600*r-60*n}}var d={createIdentityMatrix:c,multiplyInto:m,rotateXMatrix:function(e,t){var r=Math.PI/180*t,n=Math.cos(r),i=Math.sin(r);m(e,e,[1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1])},perspectiveMatrix:function(e,t){var r=c();i.reusePerspectiveCommand(r,t),m(e,e,r)},translateMatrix:function(e,t){var r=t.x,n=t.y,o=t.z,a=c();i.reuseTranslate3dCommand(a,r,n,o),m(e,a,e)},untranslateMatrix:function(e,t){var r=t.x,n=t.y,o=t.z,a=c();i.reuseTranslate3dCommand(a,-r,-n,-o),m(e,e,a)},convertNumberToTime:f,convertDateToTime:function(e){var t=Date.now(),r="number"==typeof e?e:e instanceof Date?e.getTime():0,n=Math.round((r-t)/1e3);return n<=0?{hours:0,minutes:0,seconds:0}:f(n)},subtractTime:function(e,t,r){return(r-=1)<0&&(t<=0&&e<=0?(t=0,r=0):(t-=1,r=59)),t<0&&(e<=0?(e=0,t=0):(e-=1,t=59)),{hours:e,minutes:t,seconds:r}},formatTime:function(e,t,r){return e<10&&(e="0"+e),t<10&&(t="0"+t),r<10&&(r="0"+r),{hours:e,minutes:t,seconds:r}}};function b(e){var n=e.setRef,i=e.type,o=e.size,a=e.number,s=e.flipCardStyle,u=e.numberStyle;return t.createElement(r.Animated.View,{ref:n,style:[p.flipCard,"front"===i?{top:0,borderTopLeftRadius:o/10,borderTopRightRadius:o/10,borderBottomWidth:.5}:{top:"50%",borderBottomLeftRadius:o/10,borderBottomRightRadius:o/10,borderTopWidth:.5},s]},t.createElement(r.View,{style:p.overflowContainer},t.createElement(r.Text,{style:[p.number,{transform:["front"===i?{translateY:.3*o}:{translateY:.3*-o}],fontSize:o/1.5,lineHeight:o/1.5},u]},a)))}function y(e){var n=e.type,i=e.size,o=e.number,a=e.cardStyle,s=e.numberStyle;return t.createElement(r.View,{style:[p.card,"upper"===n?{borderBottomWidth:.5}:{borderTopWidth:.5},a]},t.createElement(r.Text,{style:[p.number,{transform:["upper"===n?{translateY:.3*i}:{translateY:.3*-i}],fontSize:i/1.5,lineHeight:i/1.5},s]},o))}b.defaultProps={flipCardStyle:{},numberStyle:{}},b.propTypes={setRef:n.func.isRequired,type:n.string.isRequired,size:n.number.isRequired,number:n.oneOfType([n.string,n.number]).isRequired,flipCardStyle:n.object,numberStyle:n.object},y.defaultProps={cardStyle:{},numberStyle:{}},y.propTypes={type:n.string.isRequired,size:n.number.isRequired,number:n.oneOfType([n.string,n.number]).isRequired,cardStyle:n.object,numberStyle:n.object};var h=r.Dimensions.get("window").width,v=function(e){function n(t){var n;return o(l(n=e.call(this,t)||this),"setFrontRef",function(e){n.frontRef=e}),o(l(n),"setBackRef",function(e){n.backRef=e}),o(l(n),"animateTick",function(){n.rotateFront.setValue(0),n.rotateBack.setValue(-180),r.Animated.parallel([r.Animated.timing(n.rotateFront,{toValue:180,duration:800,useNativeDriver:!0}),r.Animated.timing(n.rotateBack,{toValue:0,duration:800,useNativeDriver:!0})]).start()}),o(l(n),"transformRef",function(e,t,r){var i=n.props.perspective,o=d.createIdentityMatrix();d.translateMatrix(o,{x:0,y:r,z:0}),d.perspectiveMatrix(o,i),d.rotateXMatrix(o,t),d.untranslateMatrix(o,{x:0,y:r,z:0}),e&&e.setNativeProps({style:{transform:[{matrix:o}]}})}),n.rotateFront=new r.Animated.Value(0),n.rotateBack=new r.Animated.Value(-180),n.frontRef=null,n.backRef=null,n}s(n,e);var i=n.prototype;return i.componentDidMount=function(){var e=this,t=this.props.size;this.rotateFront.addListener(function(r){var n=r.value;e.transformRef(e.frontRef,n,.3*t)}),this.rotateBack.addListener(function(r){var n=r.value;e.transformRef(e.backRef,n,.3*-t)})},i.shouldComponentUpdate=function(e){var t=this.props.previousNumber;return e.previousNumber!==t&&this.animateTick(),!0},i.render=function(){var e=this.props,n=e.number,i=e.previousNumber,o=e.size,a=e.numberWrapperStyle,s=e.cardStyle,u=e.flipCardStyle,l=e.numberStyle;return t.createElement(r.View,{style:[p.numberWrapper,{width:.8*o,height:1.2*o,borderRadius:o/10},a]},t.createElement(y,{type:"upper",size:o,number:i,cardStyle:s,numberStyle:l}),t.createElement(y,{type:"lower",size:o,number:n,cardStyle:s,numberStyle:l}),t.createElement(b,{setRef:this.setFrontRef,type:"front",size:o,number:n,flipCardStyle:u,numberStyle:l}),t.createElement(b,{setRef:this.setBackRef,type:"back",size:o,number:i,flipCardStyle:u,numberStyle:l}))},n}(t.Component);function S(e){var n=e.number,i=e.unit,o=e.flip,a=e.size,s=e.perspective,u=e.numberWrapperStyle,l=e.cardStyle,c=e.flipCardStyle,m=e.numberStyle,f=n+(o?1:0);f=e.firstRender?n:"hours"!==i?60===f?0:f:24===f?0:f;var d=n<10?"0"+n:String(n),b=f<10?"0"+f:String(f),y=d.split(""),h=b.split("");return t.createElement(r.View,{style:p.wrapper},t.createElement(v,{number:h[0],previousNumber:y[0],size:a,perspective:s,numberWrapperStyle:u,cardStyle:l,flipCardStyle:c,numberStyle:m}),t.createElement(v,{number:h[1],previousNumber:y[1],size:a,perspective:s,numberWrapperStyle:u,cardStyle:l,flipCardStyle:c,numberStyle:m}))}function T(){return t.createElement(r.View,{style:p.separator},t.createElement(r.View,{style:p.circle}),t.createElement(r.View,{style:p.circle}))}v.defaultProps={size:h/6,perspective:250},v.propTypes={number:n.oneOfType([n.string,n.number]).isRequired,previousNumber:n.oneOfType([n.string,n.number]),perspective:n.number,size:n.number,numberWrapperStyle:n.object,cardStyle:n.object,flipCardStyle:n.object,numberStyle:n.object},S.defaultProps={unit:"seconds"},S.propTypes={number:n.number.isRequired,unit:n.oneOf(["hours","minutes","seconds"]),flip:n.bool,size:n.number,perspective:n.number,numberWrapperStyle:n.object,cardStyle:n.object,flipCardStyle:n.object,numberStyle:n.object,firstRender:n.bool};var w=function(e){function n(t){var r;o(l(r=e.call(this,t)||this),"updateTime",function(){r.initialTime=!1;var e=r.state,t=e.hours,n=e.minutes,i=e.seconds;if(t||n||i){var o=r.props.onComplete,s=d.subtractTime(t,n,i);r.setState(function(e){return a({},e,s)}),0===s.hours&&0===s.minutes&&0===s.seconds&&(clearInterval(r.timer),setTimeout(o,800))}else t||n||i||clearInterval(r.timer)});var n=r.props,i=n.duration,s=n.time,u=void 0!==s?d.convertDateToTime(s):d.convertNumberToTime(i),p=u.hours,c=u.minutes,m=u.seconds;return r.state={hours:p,minutes:c,seconds:m},r.initialTime=!0,r}s(n,e);var i=n.prototype;return i.componentDidMount=function(){var e=this.state,t=e.hours,r=e.minutes,n=e.seconds,i=this.props.play;(t||r||n)&&i&&(this.timer=setInterval(this.updateTime,1e3))},i.shouldComponentUpdate=function(e){var t=this.props,r=t.time,n=t.duration,i=t.play;if(e.time!==r||e.duration!==n){clearInterval(this.timer);var o=e.time!==r?d.convertDateToTime(e.time):d.convertNumberToTime(e.duration);this.initialTime=!0,this.setState(o),this.timer=setInterval(this.updateTime,1e3)}return e.play!==i&&(clearInterval(this.timer),e.play&&(this.timer=setInterval(this.updateTime,1e3))),!0},i.componentWillUnmount=function(){clearInterval(this.timer)},i.render=function(){var e=this.props,n=e.wrapperStyle,i=e.flipNumberProps,o=e.unitsToShow,s=e.separators,u=this.state,l=u.hours,c=u.minutes,m=u.seconds,f=o.includes("H"),d=o.includes("M"),b=o.includes("S");return t.createElement(r.View,{style:[p.wrapper,n]},f&&t.createElement(t.Fragment,null,t.createElement(S,a({number:l,unit:"hours",flip:59===c,firstRender:this.initialTime},i)),s&&t.createElement(T,null)),d&&t.createElement(t.Fragment,null,t.createElement(S,a({number:c,unit:"minutes",flip:59===m,firstRender:this.initialTime},i)),s&&t.createElement(T,null)),b&&t.createElement(S,a({number:m,unit:"seconds",flip:!0,firstRender:this.initialTime},i)))},n}(t.Component);w.defaultProps={play:!0,wrapperStyle:{},onComplete:function(){},separators:!0,unitsToShow:["H","M","S"]},w.propTypes={duration:n.number,time:n.oneOfType([n.number,n.instanceOf(Date)]),play:n.bool,wrapperStyle:n.object,flipNumberProps:n.shape({size:n.number,perspective:n.number,numberWrapperStyle:n.object,cardStyle:n.object,flipCardStyle:n.object,numberStyle:n.object}),onComplete:n.func,separators:n.bool,unitsToShow:n.arrayOf(n.string)},e.CountdownTimer=w,e.FlipNumber=S,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=react-native-flip-countdown-timer.min.js.map
